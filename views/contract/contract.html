<script src="/static/js/jquery-1.10.1.min.js" type="text/javascript"></script>
<script src="/static/js/bootstrap.min.js"></script>

<script src="/static/cmdb/contract.js"></script>
<script src="/static/cmdb/bootstrap-datetimepicker/bootstrap-datetimepicker.min.js"></script>
<link rel="stylesheet" href="/static/cmdb/bootstrap-datetimepicker/bootstrap-datetimepicker.min.css" />
<!--link href="/static/css/bootstrap.min.css" rel="stylesheet" type="text/css"/-->


<!-- BEGIN PAGE HEADER-->
<div class="row-fluid">
    <div class="span12">

        <!-- BEGIN PAGE TITLE & BREADCRUMB-->
        <h3 class="page-title">
            合同管理
        </h3>
        <ul class="breadcrumb">
            <li>
                <i class="icon-home"></i>
                <a href="index">首页</a> 
                <i class="icon-angle-right"></i>
            </li>
            <li>
                <a href="#">合同</a>
                <i class="icon-angle-right"></i>
            </li>
            <li><a href="/contract/contract">合同管理</a></li>
        </ul>
        <!-- END PAGE TITLE & BREADCRUMB-->
    </div>
</div>
<!-- END PAGE HEADER-->

<!-- BEGIN SAMPLE TABLE PORTLET-->
<div class="portlet box red">     
    <div class="portlet-title">
        <div class="caption"><i class="icon-cogs"></i>合同列表</div>
        <div class="tools">
            <a href="javascript:;" class="collapse"></a>
            <a href="#add_contract" data-toggle="modal" class="config"></a>
        </div>
    </div>
    <div class="portlet-body">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>合同id</th>
                    <th>供应商</th>
                    <th>合同名称</th>
                    <th class="hidden-480">合同编号</th>
                    <th>合同类型</th>
                    <th>合同年限</th>
                    <th>付款方式</th>
                    <th>服务类型</th>
                    <th>合同签订时间</th>
                    <th>服务过保时间</th>
                    <th>合同状态</th>
                    <th>详情</th>
                </tr>
            </thead>
            <tbody>
                {{range .contract_list}}
                <tr>
                    <td>{{.Id}}</td>
                    <td>{{.SupplierName}}</td>
                    <td>{{.ContractName}}</td>
                    <td class="hidden-480">{{.ContractNumber}}</td>
                    <td>{{.ContractType}}</td>
                    <td>{{.ContractYears}}</td>
                    <td>{{.PaymentStyle}}</td>
                    <td>{{.ContractServer}}</td>
                    <td>{{.ContractSignTime}}</td>
                    <td>{{.ContractExpirationTime}}</td>
                    {{if eq .Status 0}}
                    <td><span class="label label-warning label-mini">未生效</span></td>
                    {{else}}
                    <td><span class="label label-success label-mini">已生效</span></td>
                    {{end}}   
                    <td>
                        <a class="host_edit" style="display: inline;" href="javascript:void(0)" title="编辑">
                                <i class="icon-edit" aria-hidden="true"></i>
                            </a>
                        <a class="host_delete" style="display: inline;" href="javascript:void(0)" title="删除">
                            <i class="icon-remove" aria-hidden="true"></i>
                        </a>
                    </td>
                </tr>
                {{end}}
            </tbody> 
        </table>
    </div>
</div>

<!-- END SAMPLE TABLE PORTLET-->



<div id= "add_contract" class="modal hide">
    <div class="modal-header">
        <button data-dismiss="modal" class="close" type="button"></button>
        <h3>新增合同</h3>
    </div>
    <div class="modal-body" id="get_host_info">
        <div class="control-group">
            <label class="control-label">供应商:<span class="required">*</span></label>
            <div class="controls">
                <input type="text" class="span6 m-wrap" id="supplier_name">
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">合同名称:<span class="required">*</span></label>
            <div class="controls">
                <input type="text" class="span6 m-wrap" id="contract_name">
            </div>
        </div>
    
        <div class="control-group">
            <label class="control-label">合同编号:<span class="required">*</span></label>
            <div class="controls">
                <input type="text" class="span6 m-wrap" id="contract_number">
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">合同类型:<span class="required">*</span></label>
            <div class="controls">
                <select class="span6 m-wrap" id="contract_type">
                    <option value="add">新增合同</option>
                    <option value="renew">续签合同</option>
                </select>
            </div>
        </div>
       
        <div class="control-group">
            <label class="control-label">服务类型:<span class="required">*</span></label>
            <div class="controls">
                <input type="text" class="span6 m-wrap" id="contract_server">
            </div>
        </div>

        <div class="control-group">
            <label class="control-label">付款方式:<span class="required">*</span></label>
            <div class="controls">
                <select class="span6 m-wrap" id="payment_style">
                    <option value="1">月付</option>
                    <option value="2">季付</option>
                    <option value="3">年付</option>
                    <option value="5">合同金额付款</option>
                </select>
            </div>
        </div>

        <div class="control-group">
            <label class="control-label">合同年限:<span class="required">*</span></label>
            <div class="controls">
                <select class="span6 m-wrap" id="contract_years">
                    <option value="1">1年</option>
                    <option value="2">2年</option>
                    <option value="3">3年</option>
                    <option value="5">5年</option>
                </select>
            </div>
        </div>

        <div class="control-group">
            <label class="control-label">状态:<span class="required">*</span></label>
            <div class="controls">
                <select class="span6 m-wrap" id="status">
                    <option value="0">已生效</option>
                    <option value="1">未生效</option>
                </select>
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">合同签订时间:<span class="required">*</span></label>
            <div class="controls">
                <input type="text" class="span6 m-wrap" id="contract_sign_time">
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">合同过保时间:<span class="required">*</span></label>
            <div class="controls">
                <input type="text" class="span6 m-wrap" id="contract_expiration_time">
            </div>
        </div>
        
        <button class="btn btn-default" id="add_contract_button">添加</button>
    </div>
</div>
        
<div id="change_host_model" class="modal hide">
    <div class="modal-header">
        <button data-dismiss="modal" class="close" type="button"></button>
        <h3>更新合同</h3>
    </div>
    <div class="modal-body">
        <div class="control-group">
            <label class="control-label">供应商:<span class="required">*</span></label>
            <div class="controls">
                <input type="text" class="span6 m-wrap" id="app_name">
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">合同名称:<span class="required">*</span></label>
            <div class="controls">
                <input type="text" class="span6 m-wrap" id="mechine_type">
            </div>
        </div>
    
        <div class="control-group">
            <label class="control-label">合同编号:<span class="required">*</span></label>
            <div class="controls">
                <input type="text" class="span6 m-wrap" id="host_oobip">
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">合同类型:<span class="required">*</span></label>
            <div class="controls">
                <select class="span6 m-wrap" id="host_env">
                    <option value="pref">新增合同</option>
                    <option value="dev">续签合同</option>
                </select>
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">合同年限:<span class="required">*</span></label>
            <div class="controls">
                <select class="span6 m-wrap" id="host_env">
                    <option value="1">1年</option>
                    <option value="2">2年</option>
                    <option value="3">3年</option>
                    <option value="5">5年</option>
                </select>
            </div>
        </div>

        <div class="control-group">
            <label class="control-label">付款方式:<span class="required">*</span></label>
            <div class="controls">
                <select class="span6 m-wrap" id="host_env">
                    <option value="1">月付</option>
                    <option value="2">季付</option>
                    <option value="3">年付</option>
                    <option value="5">合同金额付款</option>
                </select>
            </div>
        </div>

        <div class="control-group">
            <label class="control-label">状态:<span class="required">*</span></label>
            <div class="controls">
                <select class="span6 m-wrap" id="status">
                    <option value="buffer">已生效</option>
                    <option value="offline">未生效</option>
                </select>
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">合同签订时间:<span class="required">*</span></label>
            <div class="controls">
                <input type="text" class="span6 m-wrap" id="update_contract_sign_time">
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">合同过保时间:<span class="required">*</span></label>
            <div class="controls">
                <input type="text" class="span6 m-wrap" id="update_contract_expiration_time">
            </div>
        </div>
        
        <button class="btn btn-default" id="update_contract_button">更新</button>
    </div>
</div>


<script>
     $('#contract_sign_time').datetimepicker({
        //minView: "month", //选择日期后，不会再跳转去选择时分秒
        minView: "month",
        language:  'zh-CN',
        todayBtn:  1,
        autoclose: 1
    });

    $('#contract_expiration_time').datetimepicker({
        //minView: "month", //选择日期后，不会再跳转去选择时分秒
        minView: "month",
        language:  'zh-CN',
        todayBtn:  1,
        autoclose: 1
    });

</script>